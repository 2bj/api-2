parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"QdEO":[function(require,module,exports) {
module.exports={props:{name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,required:!0},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},options:{type:Object,default:function(){return{}}},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null}}};
},{}],"NOTB":[function(require,module,exports) {
"use strict";function t(i){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function o(t){return h(t)||a(t)||r()}function h(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s="undefined"!=typeof window,c=s?window:{},l="cropper",d="all",p="crop",u="move",m="zoom",f="e",g="w",v="s",w="n",b="ne",y="nw",x="se",M="sw",C="".concat(l,"-crop"),k="".concat(l,"-disabled"),N="".concat(l,"-hidden"),H="".concat(l,"-hide"),W="".concat(l,"-invisible"),Y="".concat(l,"-modal"),B="".concat(l,"-move"),X="".concat(l,"Action"),O="".concat(l,"Preview"),z="crop",S="move",j="none",L="crop",q="cropend",E="cropmove",D="cropstart",T="dblclick",$=c.PointerEvent?"pointerdown":"touchstart mousedown",Q=c.PointerEvent?"pointermove":"touchmove mousemove",Z=c.PointerEvent?"pointerup pointercancel":"touchend touchcancel mouseup",K="ready",V="resize",U="wheel mousewheel DOMMouseScroll",F="zoom",P="image/jpeg",J=/^(?:e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,R=/^data:/,I=/^data:image\/jpeg;base64,/,A=/^(?:img|canvas)$/i,G={viewMode:0,dragMode:z,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},_='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',tt=Number.isNaN||c.isNaN;function it(t){return"number"==typeof t&&!tt(t)}function et(t){return void 0===t}function nt(i){return"object"===t(i)&&null!==i}var ot=Object.prototype.hasOwnProperty;function ht(t){if(!nt(t))return!1;try{var i=t.constructor,e=i.prototype;return i&&e&&ot.call(e,"isPrototypeOf")}catch(n){return!1}}function at(t){return"function"==typeof t}function rt(t,i){if(t&&at(i))if(Array.isArray(t)||it(t.length)){var e,n=t.length;for(e=0;e<n&&!1!==i.call(t,t[e],e,t);e+=1);}else nt(t)&&Object.keys(t).forEach(function(e){i.call(t,t[e],e,t)});return t}var st=Object.assign||function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];return nt(t)&&e.length>0&&e.forEach(function(i){nt(i)&&Object.keys(i).forEach(function(e){t[e]=i[e]})}),t},ct=/\.\d*(?:0|9){12}\d*$/;function lt(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ct.test(t)?Math.round(t*i)/i:t}var dt=/^(?:width|height|left|top|marginLeft|marginTop)$/;function pt(t,i){var e=t.style;rt(i,function(t,i){dt.test(i)&&it(t)&&(t+="px"),e[i]=t})}function ut(t,i){return t.classList?t.classList.contains(i):t.className.indexOf(i)>-1}function mt(t,i){if(i)if(it(t.length))rt(t,function(t){mt(t,i)});else if(t.classList)t.classList.add(i);else{var e=t.className.trim();e?e.indexOf(i)<0&&(t.className="".concat(e," ").concat(i)):t.className=i}}function ft(t,i){i&&(it(t.length)?rt(t,function(t){ft(t,i)}):t.classList?t.classList.remove(i):t.className.indexOf(i)>=0&&(t.className=t.className.replace(i,"")))}function gt(t,i,e){i&&(it(t.length)?rt(t,function(t){gt(t,i,e)}):e?mt(t,i):ft(t,i))}var vt=/([a-z\d])([A-Z])/g;function wt(t){return t.replace(vt,"$1-$2").toLowerCase()}function bt(t,i){return nt(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-".concat(wt(i)))}function yt(t,i,e){nt(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-".concat(wt(i)),e)}function xt(t,i){if(nt(t[i]))try{delete t[i]}catch(e){t[i]=void 0}else if(t.dataset)try{delete t.dataset[i]}catch(e){t.dataset[i]=void 0}else t.removeAttribute("data-".concat(wt(i)))}var Mt=/\s\s*/,Ct=function(){var t=!1;if(s){var i=!1,e=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,i},set:function(t){i=t}});c.addEventListener("test",e,n),c.removeEventListener("test",e,n)}return t}();function kt(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;i.trim().split(Mt).forEach(function(i){if(!Ct){var h=t.listeners;h&&h[i]&&h[i][e]&&(o=h[i][e],delete h[i][e],0===Object.keys(h[i]).length&&delete h[i],0===Object.keys(h).length&&delete t.listeners)}t.removeEventListener(i,o,n)})}function Nt(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;i.trim().split(Mt).forEach(function(i){if(n.once&&!Ct){var h=t.listeners,a=void 0===h?{}:h;o=function(){delete a[i][e],t.removeEventListener(i,o,n);for(var h=arguments.length,r=new Array(h),s=0;s<h;s++)r[s]=arguments[s];e.apply(t,r)},a[i]||(a[i]={}),a[i][e]&&t.removeEventListener(i,a[i][e],n),a[i][e]=o,t.listeners=a}t.addEventListener(i,o,n)})}function Ht(t,i,e){var n;return at(Event)&&at(CustomEvent)?n=new CustomEvent(i,{detail:e,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,e),t.dispatchEvent(n)}function Wt(t){var i=t.getBoundingClientRect();return{left:i.left+(window.pageXOffset-document.documentElement.clientLeft),top:i.top+(window.pageYOffset-document.documentElement.clientTop)}}var Yt=c.location,Bt=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i;function Xt(t){var i=t.match(Bt);return i&&(i[1]!==Yt.protocol||i[2]!==Yt.hostname||i[3]!==Yt.port)}function Ot(t){var i="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+i}function zt(t){var i=t.rotate,e=t.scaleX,n=t.scaleY,o=t.translateX,h=t.translateY,a=[];it(o)&&0!==o&&a.push("translateX(".concat(o,"px)")),it(h)&&0!==h&&a.push("translateY(".concat(h,"px)")),it(i)&&0!==i&&a.push("rotate(".concat(i,"deg)")),it(e)&&1!==e&&a.push("scaleX(".concat(e,")")),it(n)&&1!==n&&a.push("scaleY(".concat(n,")"));var r=a.length?a.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function St(t){var i=st({},t),e=[];return rt(t,function(t,n){delete i[n],rt(i,function(i){var n=Math.abs(t.startX-i.startX),o=Math.abs(t.startY-i.startY),h=Math.abs(t.endX-i.endX),a=Math.abs(t.endY-i.endY),r=Math.sqrt(n*n+o*o),s=(Math.sqrt(h*h+a*a)-r)/r;e.push(s)})}),e.sort(function(t,i){return Math.abs(t)<Math.abs(i)}),e[0]}function jt(t,i){var e=t.pageX,n=t.pageY,o={endX:e,endY:n};return i?o:st({startX:e,startY:n},o)}function Lt(t){var i=0,e=0,n=0;return rt(t,function(t){var o=t.startX,h=t.startY;i+=o,e+=h,n+=1}),{pageX:i/=n,pageY:e/=n}}var qt=Number.isFinite||c.isFinite;function Et(t){var i=t.aspectRatio,e=t.height,n=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",h=function(t){return qt(t)&&t>0};if(h(n)&&h(e)){var a=e*i;"contain"===o&&a>n||"cover"===o&&a<n?e=n/i:n=e*i}else h(n)?e=n/i:h(e)&&(n=e*i);return{width:n,height:e}}function Dt(t){var i=t.width,e=t.height,n=t.degree;if(90===(n=Math.abs(n)%180))return{width:e,height:i};var o=n%90*Math.PI/180,h=Math.sin(o),a=Math.cos(o),r=i*a+e*h,s=i*h+e*a;return n>90?{width:s,height:r}:{width:r,height:s}}function Tt(t,i,e,n){var h=i.aspectRatio,a=i.naturalWidth,r=i.naturalHeight,s=i.rotate,c=void 0===s?0:s,l=i.scaleX,d=void 0===l?1:l,p=i.scaleY,u=void 0===p?1:p,m=e.aspectRatio,f=e.naturalWidth,g=e.naturalHeight,v=n.fillColor,w=void 0===v?"transparent":v,b=n.imageSmoothingEnabled,y=void 0===b||b,x=n.imageSmoothingQuality,M=void 0===x?"low":x,C=n.maxWidth,k=void 0===C?1/0:C,N=n.maxHeight,H=void 0===N?1/0:N,W=n.minWidth,Y=void 0===W?0:W,B=n.minHeight,X=void 0===B?0:B,O=document.createElement("canvas"),z=O.getContext("2d"),S=Et({aspectRatio:m,width:k,height:H}),j=Et({aspectRatio:m,width:Y,height:X},"cover"),L=Math.min(S.width,Math.max(j.width,f)),q=Math.min(S.height,Math.max(j.height,g)),E=Et({aspectRatio:h,width:k,height:H}),D=Et({aspectRatio:h,width:Y,height:X},"cover"),T=Math.min(E.width,Math.max(D.width,a)),$=Math.min(E.height,Math.max(D.height,r)),Q=[-T/2,-$/2,T,$];return O.width=lt(L),O.height=lt(q),z.fillStyle=w,z.fillRect(0,0,L,q),z.save(),z.translate(L/2,q/2),z.rotate(c*Math.PI/180),z.scale(d,u),z.imageSmoothingEnabled=y,z.imageSmoothingQuality=M,z.drawImage.apply(z,[t].concat(o(Q.map(function(t){return Math.floor(lt(t))})))),z.restore(),O}var $t=String.fromCharCode;function Qt(t,i,e){var n,o="";for(e+=i,n=i;n<e;n+=1)o+=$t(t.getUint8(n));return o}var Zt=/^data:.*,/;function Kt(t){var i=t.replace(Zt,""),e=atob(i),n=new ArrayBuffer(e.length),o=new Uint8Array(n);return rt(o,function(t,i){o[i]=e.charCodeAt(i)}),n}function Vt(t,i){for(var e=[],n=new Uint8Array(t);n.length>0;)e.push($t.apply(void 0,o(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(i,";base64,").concat(btoa(e.join("")))}function Ut(t){var i,e=new DataView(t);try{var n,o,h;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var a=e.byteLength,r=2;r+1<a;){if(255===e.getUint8(r)&&225===e.getUint8(r+1)){o=r;break}r+=1}if(o){var s=o+10;if("Exif"===Qt(e,o+4,4)){var c=e.getUint16(s);if(((n=18761===c)||19789===c)&&42===e.getUint16(s+2,n)){var l=e.getUint32(s+4,n);l>=8&&(h=s+l)}}}if(h){var d,p,u=e.getUint16(h,n);for(p=0;p<u;p+=1)if(d=h+12*p+2,274===e.getUint16(d,n)){d+=8,i=e.getUint16(d,n),e.setUint16(d,1,n);break}}}catch(m){i=1}return i}function Ft(t){var i=0,e=1,n=1;switch(t){case 2:e=-1;break;case 3:i=-180;break;case 4:n=-1;break;case 5:i=90,n=-1;break;case 6:i=90;break;case 7:i=90,e=-1;break;case 8:i=-90}return{rotate:i,scaleX:e,scaleY:n}}var Pt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,n=this.cropper;mt(n,N),ft(t,N);var o={width:Math.max(e.offsetWidth,Number(i.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(i.minContainerHeight)||100)};this.containerData=o,pt(n,{width:o.width,height:o.height}),mt(t,N),ft(n,N)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,n=Math.abs(i.rotate)%180==90,o=n?i.naturalHeight:i.naturalWidth,h=n?i.naturalWidth:i.naturalHeight,a=o/h,r=t.width,s=t.height;t.height*a>t.width?3===e?r=t.height*a:s=t.width/a:3===e?s=t.width/a:r=t.height*a;var c={aspectRatio:a,naturalWidth:o,naturalHeight:h,width:r,height:s};c.left=(t.width-r)/2,c.top=(t.height-s)/2,c.oldLeft=c.left,c.oldTop=c.top,this.canvasData=c,this.limited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImageData=st({},i),this.initialCanvasData=st({},c)},limitCanvas:function(t,i){var e=this.options,n=this.containerData,o=this.canvasData,h=this.cropBoxData,a=e.viewMode,r=o.aspectRatio,s=this.cropped&&h;if(t){var c=Number(e.minCanvasWidth)||0,l=Number(e.minCanvasHeight)||0;a>1?(c=Math.max(c,n.width),l=Math.max(l,n.height),3===a&&(l*r>c?c=l*r:l=c/r)):a>0&&(c?c=Math.max(c,s?h.width:0):l?l=Math.max(l,s?h.height:0):s&&(c=h.width,(l=h.height)*r>c?c=l*r:l=c/r));var d=Et({aspectRatio:r,width:c,height:l});c=d.width,l=d.height,o.minWidth=c,o.minHeight=l,o.maxWidth=1/0,o.maxHeight=1/0}if(i)if(a>(s?0:1)){var p=n.width-o.width,u=n.height-o.height;o.minLeft=Math.min(0,p),o.minTop=Math.min(0,u),o.maxLeft=Math.max(0,p),o.maxTop=Math.max(0,u),s&&this.limited&&(o.minLeft=Math.min(h.left,h.left+(h.width-o.width)),o.minTop=Math.min(h.top,h.top+(h.height-o.height)),o.maxLeft=h.left,o.maxTop=h.top,2===a&&(o.width>=n.width&&(o.minLeft=Math.min(0,p),o.maxLeft=Math.max(0,p)),o.height>=n.height&&(o.minTop=Math.min(0,u),o.maxTop=Math.max(0,u))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=n.width,o.maxTop=n.height},renderCanvas:function(t,i){var e=this.canvasData,n=this.imageData;if(i){var o=Dt({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),h=o.width,a=o.height,r=e.width*(h/e.naturalWidth),s=e.height*(a/e.naturalHeight);e.left-=(r-e.width)/2,e.top-=(s-e.height)/2,e.width=r,e.height=s,e.aspectRatio=h/a,e.naturalWidth=h,e.naturalHeight=a,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,pt(this.canvas,st({width:e.width,height:e.height},zt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,n=e.naturalWidth*(i.width/i.naturalWidth),o=e.naturalHeight*(i.height/i.naturalHeight);st(e,{width:n,height:o,left:(i.width-n)/2,top:(i.height-o)/2}),pt(this.image,st({width:e.width,height:e.height},zt(st({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,o={width:i.width,height:i.height};e&&(i.height*e>i.width?o.height=o.width/e:o.width=o.height*e),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=i.left+(i.width-o.width)/2,o.top=i.top+(i.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=st({},o)},limitCropBox:function(t,i){var e=this.options,n=this.containerData,o=this.canvasData,h=this.cropBoxData,a=this.limited,r=e.aspectRatio;if(t){var s=Number(e.minCropBoxWidth)||0,c=Number(e.minCropBoxHeight)||0,l=a?Math.min(n.width,o.width,o.width+o.left,n.width-o.left):n.width,d=a?Math.min(n.height,o.height,o.height+o.top,n.height-o.top):n.height;s=Math.min(s,n.width),c=Math.min(c,n.height),r&&(s&&c?c*r>s?c=s/r:s=c*r:s?c=s/r:c&&(s=c*r),d*r>l?d=l/r:l=d*r),h.minWidth=Math.min(s,l),h.minHeight=Math.min(c,d),h.maxWidth=l,h.maxHeight=d}i&&(a?(h.minLeft=Math.max(0,o.left),h.minTop=Math.max(0,o.top),h.maxLeft=Math.min(n.width,o.left+o.width)-h.width,h.maxTop=Math.min(n.height,o.top+o.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=n.width-h.width,h.maxTop=n.height-h.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&yt(this.face,X,e.width>=i.width&&e.height>=i.height?u:d),pt(this.cropBox,st({width:e.width,height:e.height},zt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ht(this.element,L,this.getData())}},Jt={initPreview:function(){var t=this.crossOrigin,i=this.options.preview,e=t?this.crossOriginUrl:this.url,n=document.createElement("img");if(t&&(n.crossOrigin=t),n.src=e,this.viewBox.appendChild(n),this.viewBoxImage=n,i){var o=i;"string"==typeof i?o=this.element.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,rt(o,function(i){var n=document.createElement("img");yt(i,O,{width:i.offsetWidth,height:i.offsetHeight,html:i.innerHTML}),t&&(n.crossOrigin=t),n.src=e,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',i.innerHTML="",i.appendChild(n)})}},resetPreview:function(){rt(this.previews,function(t){var i=bt(t,O);pt(t,{width:i.width,height:i.height}),t.innerHTML=i.html,xt(t,O)})},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,n=e.width,o=e.height,h=t.width,a=t.height,r=e.left-i.left-t.left,s=e.top-i.top-t.top;this.cropped&&!this.disabled&&(pt(this.viewBoxImage,st({width:h,height:a},zt(st({translateX:-r,translateY:-s},t)))),rt(this.previews,function(i){var e=bt(i,O),c=e.width,l=e.height,d=c,p=l,u=1;n&&(p=o*(u=c/n)),o&&p>l&&(d=n*(u=l/o),p=l),pt(i,{width:d,height:p}),pt(i.getElementsByTagName("img")[0],st({width:h*u,height:a*u},zt(st({translateX:-r*u,translateY:-s*u},t))))}))}},Rt={bind:function(){var t=this.element,i=this.options,e=this.cropper;at(i.cropstart)&&Nt(t,D,i.cropstart),at(i.cropmove)&&Nt(t,E,i.cropmove),at(i.cropend)&&Nt(t,q,i.cropend),at(i.crop)&&Nt(t,L,i.crop),at(i.zoom)&&Nt(t,F,i.zoom),Nt(e,$,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&Nt(e,U,this.onWheel=this.wheel.bind(this)),i.toggleDragModeOnDblclick&&Nt(e,T,this.onDblclick=this.dblclick.bind(this)),Nt(t.ownerDocument,Q,this.onCropMove=this.cropMove.bind(this)),Nt(t.ownerDocument,Z,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&Nt(window,V,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;at(i.cropstart)&&kt(t,D,i.cropstart),at(i.cropmove)&&kt(t,E,i.cropmove),at(i.cropend)&&kt(t,q,i.cropend),at(i.crop)&&kt(t,L,i.crop),at(i.zoom)&&kt(t,F,i.zoom),kt(e,$,this.onCropStart),i.zoomable&&i.zoomOnWheel&&kt(e,U,this.onWheel),i.toggleDragModeOnDblclick&&kt(e,T,this.onDblclick),kt(t.ownerDocument,Q,this.onCropMove),kt(t.ownerDocument,Z,this.onCropEnd),i.responsive&&kt(window,V,this.onResize)}},It={resize:function(){var t=this.options,i=this.container,e=this.containerData,n=Number(t.minContainerWidth)||200,o=Number(t.minContainerHeight)||100;if(!(this.disabled||e.width<=n||e.height<=o)){var h,a,r=i.offsetWidth/e.width;if(1!==r||i.offsetHeight!==e.height)t.restore&&(h=this.getCanvasData(),a=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(rt(h,function(t,i){h[i]=t*r})),this.setCropBoxData(rt(a,function(t,i){a[i]=t*r})))}},dblclick:function(){this.disabled||this.options.dragMode===j||this.setDragMode(ut(this.dragBox,C)?S:z)},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*e,t)))},cropStart:function(t){if(!this.disabled){var i,e=this.options,n=this.pointers;t.changedTouches?rt(t.changedTouches,function(t){n[t.identifier]=jt(t)}):n[t.pointerId||0]=jt(t),i=Object.keys(n).length>1&&e.zoomable&&e.zoomOnTouch?m:bt(t.target,X),J.test(i)&&!1!==Ht(this.element,D,{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,i===p&&(this.cropping=!0,mt(this.dragBox,Y)))}},cropMove:function(t){var i=this.action;if(!this.disabled&&i){var e=this.pointers;t.preventDefault(),!1!==Ht(this.element,E,{originalEvent:t,action:i})&&(t.changedTouches?rt(t.changedTouches,function(t){st(e[t.identifier]||{},jt(t,!0))}):st(e[t.pointerId||0]||{},jt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?rt(t.changedTouches,function(t){delete e[t.identifier]}):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,gt(this.dragBox,Y,this.cropped&&this.options.modal)),Ht(this.element,q,{originalEvent:t,action:i}))}}},At={change:function(t){var i,e=this.options,n=this.canvasData,o=this.containerData,h=this.cropBoxData,a=this.pointers,r=this.action,s=e.aspectRatio,c=h.left,l=h.top,C=h.width,k=h.height,H=c+C,W=l+k,Y=0,B=0,X=o.width,O=o.height,z=!0;!s&&t.shiftKey&&(s=C&&k?C/k:1),this.limited&&(Y=h.minLeft,B=h.minTop,X=Y+Math.min(o.width,n.width,n.left+n.width),O=B+Math.min(o.height,n.height,n.top+n.height));var S=a[Object.keys(a)[0]],j={x:S.endX-S.startX,y:S.endY-S.startY},L=function(t){switch(t){case f:H+j.x>X&&(j.x=X-H);break;case g:c+j.x<Y&&(j.x=Y-c);break;case w:l+j.y<B&&(j.y=B-l);break;case v:W+j.y>O&&(j.y=O-W)}};switch(r){case d:c+=j.x,l+=j.y;break;case f:if(j.x>=0&&(H>=X||s&&(l<=B||W>=O))){z=!1;break}L(f),(C+=j.x)<0&&(r=g,c-=C=-C),s&&(k=C/s,l+=(h.height-k)/2);break;case w:if(j.y<=0&&(l<=B||s&&(c<=Y||H>=X))){z=!1;break}L(w),k-=j.y,l+=j.y,k<0&&(r=v,l-=k=-k),s&&(C=k*s,c+=(h.width-C)/2);break;case g:if(j.x<=0&&(c<=Y||s&&(l<=B||W>=O))){z=!1;break}L(g),C-=j.x,c+=j.x,C<0&&(r=f,c-=C=-C),s&&(k=C/s,l+=(h.height-k)/2);break;case v:if(j.y>=0&&(W>=O||s&&(c<=Y||H>=X))){z=!1;break}L(v),(k+=j.y)<0&&(r=w,l-=k=-k),s&&(C=k*s,c+=(h.width-C)/2);break;case b:if(s){if(j.y<=0&&(l<=B||H>=X)){z=!1;break}L(w),k-=j.y,l+=j.y,C=k*s}else L(w),L(f),j.x>=0?H<X?C+=j.x:j.y<=0&&l<=B&&(z=!1):C+=j.x,j.y<=0?l>B&&(k-=j.y,l+=j.y):(k-=j.y,l+=j.y);C<0&&k<0?(r=M,l-=k=-k,c-=C=-C):C<0?(r=y,c-=C=-C):k<0&&(r=x,l-=k=-k);break;case y:if(s){if(j.y<=0&&(l<=B||c<=Y)){z=!1;break}L(w),k-=j.y,l+=j.y,C=k*s,c+=h.width-C}else L(w),L(g),j.x<=0?c>Y?(C-=j.x,c+=j.x):j.y<=0&&l<=B&&(z=!1):(C-=j.x,c+=j.x),j.y<=0?l>B&&(k-=j.y,l+=j.y):(k-=j.y,l+=j.y);C<0&&k<0?(r=x,l-=k=-k,c-=C=-C):C<0?(r=b,c-=C=-C):k<0&&(r=M,l-=k=-k);break;case M:if(s){if(j.x<=0&&(c<=Y||W>=O)){z=!1;break}L(g),C-=j.x,c+=j.x,k=C/s}else L(v),L(g),j.x<=0?c>Y?(C-=j.x,c+=j.x):j.y>=0&&W>=O&&(z=!1):(C-=j.x,c+=j.x),j.y>=0?W<O&&(k+=j.y):k+=j.y;C<0&&k<0?(r=b,l-=k=-k,c-=C=-C):C<0?(r=x,c-=C=-C):k<0&&(r=y,l-=k=-k);break;case x:if(s){if(j.x>=0&&(H>=X||W>=O)){z=!1;break}L(f),k=(C+=j.x)/s}else L(v),L(f),j.x>=0?H<X?C+=j.x:j.y>=0&&W>=O&&(z=!1):C+=j.x,j.y>=0?W<O&&(k+=j.y):k+=j.y;C<0&&k<0?(r=y,l-=k=-k,c-=C=-C):C<0?(r=M,c-=C=-C):k<0&&(r=b,l-=k=-k);break;case u:this.move(j.x,j.y),z=!1;break;case m:this.zoom(St(a),t),z=!1;break;case p:if(!j.x||!j.y){z=!1;break}i=Wt(this.cropper),c=S.startX-i.left,l=S.startY-i.top,C=h.minWidth,k=h.minHeight,j.x>0?r=j.y>0?x:b:j.x<0&&(c-=C,r=j.y>0?M:y),j.y<0&&(l-=k),this.cropped||(ft(this.cropBox,N),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}z&&(h.width=C,h.height=k,h.left=c,h.top=l,this.action=r,this.renderCropBox()),rt(a,function(t){t.startX=t.endX,t.startY=t.endY})}},Gt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&mt(this.dragBox,Y),ft(this.cropBox,N),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=st({},this.initialImageData),this.canvasData=st({},this.initialCanvasData),this.cropBoxData=st({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(st(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ft(this.dragBox,Y),mt(this.cropBox,N)),this},replace:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,rt(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ft(this.cropper,k)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,mt(this.cropper,k)),this},destroy:function(){var t=this.element;return t[l]?(t[l]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.canvasData,n=e.left,o=e.top;return this.moveTo(et(t)?t:n+Number(t),et(i)?i:o+Number(i))},moveTo:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.canvasData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(it(t)&&(e.left=t,n=!0),it(i)&&(e.top=i,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var n=this.options,o=this.canvasData,h=o.width,a=o.height,r=o.naturalWidth,s=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var c=r*t,l=s*t;if(!1===Ht(this.element,F,{ratio:t,oldRatio:h/r,originalEvent:e}))return this;if(e){var d=this.pointers,p=Wt(this.cropper),u=d&&Object.keys(d).length?Lt(d):{pageX:e.pageX,pageY:e.pageY};o.left-=(c-h)*((u.pageX-p.left-o.left)/h),o.top-=(l-a)*((u.pageY-p.top-o.top)/a)}else ht(i)&&it(i.x)&&it(i.y)?(o.left-=(c-h)*((i.x-o.left)/h),o.top-=(l-a)*((i.y-o.top)/a)):(o.left-=(c-h)/2,o.top-=(l-a)/2);o.width=c,o.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return it(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,it(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(it(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.imageData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(it(t)&&(e.scaleX=t,n=!0),it(i)&&(e.scaleY=i,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.options,n=this.imageData,o=this.canvasData,h=this.cropBoxData;if(this.ready&&this.cropped){t={x:h.left-o.left,y:h.top-o.top,width:h.width,height:h.height};var a=n.width/n.naturalWidth;if(rt(t,function(i,e){t[e]=i/a}),i){var r=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=r-t.y}}else t={x:0,y:0,width:0,height:0};return e.rotatable&&(t.rotate=n.rotate||0),e.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var i=this.options,e=this.imageData,n=this.canvasData,o={};if(this.ready&&!this.disabled&&ht(t)){var h=!1;i.rotatable&&it(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,h=!0),i.scalable&&(it(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,h=!0),it(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,h=!0)),h&&this.renderCanvas(!0,!0);var a=e.width/e.naturalWidth;it(t.x)&&(o.left=t.x*a+n.left),it(t.y)&&(o.top=t.y*a+n.top),it(t.width)&&(o.width=t.width*a),it(t.height)&&(o.height=t.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?st({},this.containerData):{}},getImageData:function(){return this.sized?st({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&rt(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&ht(t)&&(it(t.left)&&(i.left=t.left),it(t.top)&&(i.top=t.top),it(t.width)?(i.width=t.width,i.height=t.width/e):it(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,i=this.cropBoxData;return this.ready&&this.cropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(t){var i,e,n=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ht(t)&&(it(t.left)&&(n.left=t.left),it(t.top)&&(n.top=t.top),it(t.width)&&t.width!==n.width&&(i=!0,n.width=t.width),it(t.height)&&t.height!==n.height&&(e=!0,n.height=t.height),o&&(i?n.height=n.width/o:e&&(n.width=n.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,e=Tt(this.image,this.imageData,i,t);if(!this.cropped)return e;var n=this.getData(),h=n.x,a=n.y,r=n.width,s=n.height,c=e.width/Math.floor(i.naturalWidth);1!==c&&(h*=c,a*=c,r*=c,s*=c);var l=r/s,d=Et({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Et({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=Et({aspectRatio:l,width:t.width||(1!==c?e.width:r),height:t.height||(1!==c?e.height:s)}),m=u.width,f=u.height;m=Math.min(d.width,Math.max(p.width,m)),f=Math.min(d.height,Math.max(p.height,f));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=lt(m),g.height=lt(f),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,m,f);var w=t.imageSmoothingEnabled,b=void 0===w||w,y=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var x,M,C,k,N,H,W=e.width,Y=e.height,B=h,X=a;B<=-r||B>W?(B=0,x=0,C=0,N=0):B<=0?(C=-B,B=0,N=x=Math.min(W,r+B)):B<=W&&(C=0,N=x=Math.min(r,W-B)),x<=0||X<=-s||X>Y?(X=0,M=0,k=0,H=0):X<=0?(k=-X,X=0,H=M=Math.min(Y,s+X)):X<=Y&&(k=0,H=M=Math.min(s,Y-X));var O=[B,X,x,M];if(N>0&&H>0){var z=m/r;O.push(C*z,k*z,N*z,H*z)}return v.drawImage.apply(v,[e].concat(o(O.map(function(t){return Math.floor(lt(t))})))),g},setAspectRatio:function(t){var i=this.options;return this.disabled||et(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var o=t===z,h=i.movable&&t===S;t=o||h?t:j,i.dragMode=t,yt(e,X,t),gt(e,C,o),gt(e,B,h),i.cropBoxMovable||(yt(n,X,t),gt(n,C,o),gt(n,B,h))}return this}},_t=c.Cropper,ti=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,t),!e||!A.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=st({},G,ht(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return n(t,[{key:"init",value:function(){var t,i=this.element,e=i.tagName.toLowerCase();if(!i[l]){if(i[l]=this,"img"===e){if(this.isImg=!0,t=i.getAttribute("src")||"",this.originalUrl=t,!t)return;t=i.src}else"canvas"===e&&window.HTMLCanvasElement&&(t=i.toDataURL());this.load(t)}}},{key:"load",value:function(t){var i=this;if(t){this.url=t,this.imageData={};var e=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(R.test(t))I.test(t)?this.read(Kt(t)):this.clone();else{var o=new XMLHttpRequest,h=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.ontimeout=h,o.onabort=h,o.onerror=h,o.onprogress=function(){o.getResponseHeader("content-type")!==P&&o.abort()},o.onload=function(){i.read(o.response)},o.onloadend=function(){i.reloading=!1,i.xhr=null},n.checkCrossOrigin&&Xt(t)&&e.crossOrigin&&(t=Ot(t)),o.open("GET",t),o.responseType="arraybuffer",o.withCredentials="use-credentials"===e.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(t){var i=this.options,e=this.imageData,n=Ut(t),o=0,h=1,a=1;if(n>1){this.url=Vt(t,P);var r=Ft(n);o=r.rotate,h=r.scaleX,a=r.scaleY}i.rotatable&&(e.rotate=o),i.scalable&&(e.scaleX=h,e.scaleY=a),this.clone()}},{key:"clone",value:function(){var t,i,e=this.element,n=this.url;this.options.checkCrossOrigin&&Xt(n)&&((t=e.crossOrigin)?i=n:(t="anonymous",i=Ot(n))),this.crossOrigin=t,this.crossOriginUrl=i;var o=document.createElement("img");t&&(o.crossOrigin=t),o.src=i||n,this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),mt(o,H),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var t=this,i=this.isImg?this.element:this.image;i.onload=null,i.onerror=null,this.sizing=!0;var e=c.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(c.navigator.userAgent),n=function(i,e){st(t.imageData,{naturalWidth:i,naturalHeight:e,aspectRatio:i/e}),t.sizing=!1,t.sized=!0,t.build()};if(!i.naturalWidth||e){var o=document.createElement("img"),h=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),e||h.removeChild(o)},o.src=i.src,e||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",h.appendChild(o))}else n(i.naturalWidth,i.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,i=this.options,e=this.image,n=t.parentNode,o=document.createElement("div");o.innerHTML=_;var h=o.querySelector(".".concat(l,"-container")),a=h.querySelector(".".concat(l,"-canvas")),r=h.querySelector(".".concat(l,"-drag-box")),s=h.querySelector(".".concat(l,"-crop-box")),c=s.querySelector(".".concat(l,"-face"));this.container=n,this.cropper=h,this.canvas=a,this.dragBox=r,this.cropBox=s,this.viewBox=h.querySelector(".".concat(l,"-view-box")),this.face=c,a.appendChild(e),mt(t,N),n.insertBefore(h,t.nextSibling),this.isImg||ft(e,H),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,mt(s,N),i.guides||mt(s.getElementsByClassName("".concat(l,"-dashed")),N),i.center||mt(s.getElementsByClassName("".concat(l,"-center")),N),i.background&&mt(h,"".concat(l,"-bg")),i.highlight||mt(c,W),i.cropBoxMovable&&(mt(c,B),yt(c,X,d)),i.cropBoxResizable||(mt(s.getElementsByClassName("".concat(l,"-line")),N),mt(s.getElementsByClassName("".concat(l,"-point")),N)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),at(i.ready)&&Nt(t,K,i.ready,{once:!0}),Ht(t,K)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),ft(this.element,N))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=_t,t}},{key:"setDefaults",value:function(t){st(G,ht(t)&&t)}}]),t}();st(ti.prototype,Pt,Jt,Rt,It,At,Gt);var ii=ti;exports.default=ii;
},{}],"htvv":[function(require,module,exports) {

},{}],"v3sR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../../../mixins/interface")),t=a(require("cropperjs"));require("cropperjs/dist/cropper.min.css");var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var r={mixins:[e.default],data:function(){return{editMode:null,image:{version:0,cropper:null,cropRatio:"free",cropRatioOptions:{free:"Free",original:"Original","1:1":"Square","16:9":"16:9","4:3":"4:3","3:2":"3:2"},initOptions:{background:!1,viewMode:0,autoCropArea:1,zoomable:!1}}}},watch:{"image.cropRatio":function(e){this.setAspectRatio(e)}},computed:{isImage:function(){switch(this.values.type){case"image/jpeg":case"image/gif":case"image/png":case"image/svg+xml":case"image/webp":case"image/bmp":return!0}return!1},isVideo:function(){switch(this.values.type){case"video/mp4":case"video/webm":case"video/ogg":return!0}return!1},isAudio:function(){switch(this.values.type){case"audio/mpeg":case"audio/ogg":case"audio/wav":return!0}return!1},fileType:function(){return this.values.type.split("/")[1]},url:function(){return this.values.data.full_url},vUrl:function(){return"".concat(this.values.data.full_url,"?v=").concat(this.image.version,"&timestamp=").concat((new Date).getTime())}},methods:{initImageEdit:function(){var e=this;this.editMode="image",this.image.show=!1;var a=document.getElementById("image");this.image.cropper=new t.default(a,i({},this.image.initOptions)),window.addEventListener("keydown",function(t){"image"==e.editMode&&"Escape"==t.key&&(e.cancelImageEdit(),window.removeEventListener("keydown",escapeEditImage))})},cancelImageEdit:function(){this.editMode=null,this.image.cropRatio="free",this.image.cropper.destroy()},setAspectRatio:function(e){var t;switch(e){case"free":t="free";break;case"original":t=this.image.cropper.getImageData().aspectRatio;break;default:var i=e.split(":");t=i[0]/i[1]}this.image.cropper.setAspectRatio(t)},flipImage:function(){this.image.cropper.scale(-this.image.cropper.getData().scaleX,1)},rotateImage:function(){this.image.cropper.rotate(-90)},saveImage:function(){var e=this,t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t});var i=this.image.cropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toDataURL(this.values.type);this.$api.patch("/files/".concat(this.values.id),{data:i}).then(function(t){e.$events.emit("success",{notify:"Image updated."})}).catch(function(t){e.$events.emit("error",{notify:"There was an error while saving the image",error:t})}).then(function(){e.image.version++;var i=new Image;i.src=e.vUrl,i.onload=function(){e.$store.dispatch("loadingFinished",t),e.cancelImageEdit()}})}}};exports.default=r;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[t.isImage?a("div",{staticClass:"image"},[a("img",{attrs:{id:"image",src:t.vUrl}})]):t.isVideo?a("div",{staticClass:"video"},[a("video",{attrs:{controls:""}},[a("source",{attrs:{src:t.url,type:t.values.type}}),t._v(" I'm sorry; your browser doesn't support HTML5 video in this format. ")])]):t.isAudio?a("div",{staticClass:"audio"},[a("audio",{attrs:{controls:""}},[a("source",{attrs:{src:t.url,type:t.values.type}}),t._v(" I'm sorry; your browser doesn't support HTML5 audio in this format. ")])]):a("div",{staticClass:"file"},[t._v(t._s(t.fileType))]),t._v(" "),a("div",{staticClass:"toolbar"},[t.editMode?t._e():a("div",{staticClass:"original"},[a("a",{staticClass:"file-link",attrs:{href:t.url,target:"_blank"}},[a("i",{staticClass:"material-icons"},[t._v("link")]),t._v(" "+t._s(t.url)+" ")]),t._v(" "),t.isImage&&t.options.edit.includes("image_editor")?a("button",{staticClass:"image-edit-start",attrs:{type:"button",title:"Edit image"},on:{click:function(i){t.initImageEdit()}}},[a("i",{staticClass:"material-icons"},[t._v("crop_rotate")])]):t._e()]),t._v(" "),t.editMode?a("ul",{staticClass:"image-edit"},[a("li",[a("div",{staticClass:"image-aspect-ratio"},[a("i",{staticClass:"material-icons"},[t._v("image_aspect_ratio")]),t._v(" "),a("span",[t._v(t._s(t.image.cropRatioOptions[t.image.cropRatio]))]),t._v(" "),a("i",{staticClass:"material-icons"},[t._v("arrow_drop_down")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.image.cropRatio,expression:"image.cropRatio"}],attrs:{title:"Select aspect ratio"},on:{change:function(i){var a=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.image,"cropRatio",i.target.multiple?a:a[0])}}},t._l(t.image.cropRatioOptions,function(i,e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(i)+" ")])}),0)])]),t._v(" "),a("li",[a("button",{attrs:{type:"button",title:"Discard changes"},on:{click:function(i){t.cancelImageEdit()}}},[a("i",{staticClass:"material-icons"},[t._v("not_interested")])]),t._v(" "),a("button",{attrs:{type:"button",title:"Save changes"},on:{click:function(i){t.saveImage()}}},[a("i",{staticClass:"material-icons"},[t._v("check_circle")])])]),t._v(" "),a("li",[a("button",{attrs:{type:"button",title:"Flip horizontally"},on:{click:function(i){t.flipImage()}}},[a("i",{staticClass:"material-icons"},[t._v("flip")])]),t._v(" "),a("button",{attrs:{type:"button",title:"Rotate counter-clockwise"},on:{click:function(i){t.rotateImage()}}},[a("i",{staticClass:"material-icons"},[t._v("rotate_90_degrees_ccw")])])])]):t._e()])])},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-76ec5d",functional:void 0});})();
},{"../../../mixins/interface":"QdEO","cropperjs":"NOTB","cropperjs/dist/cropper.min.css":"htvv"}]},{},["v3sR"], "__DirectusExtension__")